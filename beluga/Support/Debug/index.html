<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Debug (beluga.Support.Debug)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">Index</a> &#x00BB; <a href="../../index.html">beluga</a> &#x00BB; <a href="../index.html">Support</a> &#x00BB; Debug</nav><header class="odoc-preamble"><h1>Module <code><span>Support.Debug</span></code></h1><p>Debug-print library with up to 31 separate categories of information.</p><ul class="at-tags"><li class="author"><span class="at-tag">author</span> Joshua Dunfield</li></ul><ul class="at-tags"><li class="author"><span class="at-tag">author</span> Jacob Thomas Errington</li></ul></header><div class="odoc-content"><p>Usage:</p><ul><li>In each client module, create debug-printer functions by calling <a href="#val-makeFunctions"><code>makeFunctions</code></a> or <a href="#val-makeFunctions'"><code>makeFunctions'</code></a>:</li></ul><pre class="language-ocaml"><code>  let (dprint, dprnt) = Debug.makeFunctions (Debug.toFlags [...])

  let (dprintf, dprint, dprnt) = Debug.makeFunctions' (Debug.toFlags [...])</code></pre><p>where `...' is the category (or categories) specific to the module.</p><p>Then,</p><ul><li><code>dprint</code> takes a thunk</li><li><code>dprnt</code> (misspelled) takes a string</li><li><code>dprintf</code> takes a callback receiving formatter, with which you can generate formatted output, including custom indentation.</li></ul><p>If debugging is turned off, <code>print</code> is more efficient whenever computing the string is at all nontrivial. This actually matters; running the test suite with debug mode enabled takes several times longer.</p><p>All functions will add a newline after printing your text.</p><div class="odoc-spec"><div class="spec type anchored" id="type-flags"><a href="#type-flags" class="anchor"></a><code><span><span class="keyword">type</span> flags</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-enable"><a href="#val-enable" class="anchor"></a><code><span><span class="keyword">val</span> enable : <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_enabled"><a href="#val-is_enabled" class="anchor"></a><code><span><span class="keyword">val</span> is_enabled : <span>unit <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-init"><a href="#val-init" class="anchor"></a><code><span><span class="keyword">val</span> init : <span><span>string option</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-makeFunctions"><a href="#val-makeFunctions" class="anchor"></a><code><span><span class="keyword">val</span> makeFunctions : <span><a href="#type-flags">flags</a> <span class="arrow">&#45;&gt;</span></span> <span>(<span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> string)</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> * <span>(<span>string <span class="arrow">&#45;&gt;</span></span> unit)</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Fmt"><a href="#module-Fmt" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Fmt/index.html">Fmt</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>This submodule defines a record containing a higher-rank polymorphic function. We need this record type so that we can pass a partially-applied <code>Format.fprintf</code> function to client modules. We introduce the submodule so that client modules can selectively open it if they want to use the format-string support provided by <code>Debug</code>; this will bring into scope only the <code>fmt</code> type and the <code>fmt</code> projection for the record.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-io"><a href="#type-io" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a io</span></span><span> = <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-makeFunctions'"><a href="#val-makeFunctions'" class="anchor"></a><code><span><span class="keyword">val</span> makeFunctions' : <span><a href="#type-flags">flags</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="Fmt/index.html#type-fmt">Fmt.fmt</a> <a href="#type-io">io</a></span> <a href="#type-io">io</a></span> * <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> string)</span> <a href="#type-io">io</a></span> * <span>string <a href="#type-io">io</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-toFlags"><a href="#val-toFlags" class="anchor"></a><code><span><span class="keyword">val</span> toFlags : <span><span>int list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-flags">flags</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-flag"><a href="#val-flag" class="anchor"></a><code><span><span class="keyword">val</span> flag : <span>int <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Tests if a given flag is set.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-indented"><a href="#val-indented" class="anchor"></a><code><span><span class="keyword">val</span> indented : <span><span><span><a href="Fmt/index.html#type-fmt">Fmt.fmt</a> <a href="#type-io">io</a></span> <a href="#type-io">io</a></span> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Runs the given function with debug printing indented by the given number of spaces. Pass in <code>dprintf</code> obtained by calling <code>makeFunctions'</code>.</p><p>Note that the vbox introduced to indent will NOT be closed if the given function raises an exception. This is a trade-off since the alternative would be to reraise the exception, which sadly destroys the backtrace.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-printf"><a href="#val-printf" class="anchor"></a><code><span><span class="keyword">val</span> printf : <span><span><a href="Fmt/index.html#type-fmt">Fmt.fmt</a> <a href="#type-io">io</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div></div></body></html>
