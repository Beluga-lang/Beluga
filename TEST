#!/bin/sh

# TEST: tests Beluga by calling it on various examples.
#
# Usage: TEST [options]
#
# [options], if given, are passed to bin/interpreter.
# Example: TEST +d
#
# Note that a leading '@' in a filename means that the test should NOT succeed,
#  because the file has a type error that should be caught.


# set $BELUGA to an absolute path to the toplevel .../beluga directory
#
pwd=`pwd`
BELUGA=`dirname $pwd/$0`
cd $BELUGA
BELUGA=`pwd`
# echo BELUGA: $BELUGA

# set $INTERPRETER to the executable
INTERPRETER=$BELUGA/bin/interpreter

# set $X to the `beluga' examples directory
X=$BELUGA/examples
cd $X


#  copy examples/{beluga/cntvar.rec => depend/cntvar-2.rec} (56%)
#  create mode 100644 examples/depend/test-dep.rec
#  create mode 100644 examples/depend/tps.rec
#  create mode 100644 examples/notworking/church-rosser.rec
#  create mode 100644 examples/simple/arith.rec
#  create mode 100644 examples/tests/error.rec
#  create mode 100644 examples/tests/fvnat.rec


$INTERPRETER  \
    $* \
    depend/cntvar.bel \
    depend/cntvar.rec \
    depend/copy.bel \
    depend/copy.rec \
    depend/eval-sub-tp.rec \
    depend/fvnat.bel \
    depend/fvnat.rec \
    depend/id-dep.bel \
    depend/id-dep.rec \
    depend/schema.bel \
    depend/test-dep.rec \
    depend/tpevalsub.bel \
    depend/tpevalsub.rec \
    depend/tps.rec \
    depend/vsound.bel \
    depend/vsound.rec \
    simple/arith.rec \
    simple/case1.bel \
    simple/case1.rec \
    simple/case2.bel \
    simple/case2.rec \
    simple/copy-simple.bel \
    simple/copy-simple.rec \
    simple/eval-sub-1.bel \
    simple/eval-sub-1.rec \
    simple/eval-sub.bel \
    simple/eval-sub.rec \
    simple/id.bel \
    simple/id.rec \
    @simple/sigma1.bel \
    simple/test.bel \
    simple/test.rec \
    tests/error.rec \
    @tests/fvnat.rec

#    notworking/church-rosser.rec \
#    notworking/cut-elim.bel \
#    notworking/eq-proof.bel \
#    notworking/fol-handbook.bel \
#    notworking/tpcert.bel \
#    notworking/tpeval.bel \
