This document describes the compilation and installation procedures
for Beluga.

Prerequisites
=============

Debian
------

Under Debian Linux, all the necessary prerequisites can be installed
with just the following command:

# apt-get install ocaml ocaml-findlib libextlib-ocaml-dev ocaml-ulex

The same might hold for other distributions.

The interactive mode is greatly improved if you have rlwrap installed,
so you might also want to consider:

# apt-get install rlwrap

Generic
-------

If all of the above fail, you can download and install the following
packages by hand:

ocaml 3.12.2 or greater: http://caml.inria.fr/download.en.html
extlib:                  http://code.google.com/p/ocaml-extlib/downloads/list
ulex:                    http://www.cduce.org/download.html#side

Optional dependencies (for improved interactive mode):

rlwrap:                  http://utopia.knoware.nl/~hlub/uck/rlwrap/


Building
========

Install the dependencies and then run "make", after which you'll have an
"beluga" executable in the "bin" directory that can be run.

Compilation options
-------------------

Setting the following environment variables for "make" enables the
following compilation option:

BYTE:          sets byte-code compilation instead of native
DEBUG:         enables the -g option of ocamlc
PROFILE:       enables the -p option of ocamlc
WARN_PATTERN:  enables warning for non-exhaustive patterns
VERBOSE:       sets verbosity level of ocamlbuild
PARALLEL:      sets max number of parallel processes

For instance, to enable byte-code compilation, run:

make BYTE=true

Running `make clean' will clean the directory of compilation results


Running Ruby script to convert to new syntax
=============================================

You will need Ruby 1.9 for running the script.

For MAC OS:
The default version of ruby installed on Mac OS is usually not Ruby 1.9, but
Ruby 1.8. To install the newest version of Ruby, we recommend installing first
RVM, the â€œRuby Version Manager. This will make installing Ruby 1.9 easy. In your
home directory, you can say:

 bash < <(curl -s https://rvm.beginrescueend.com/install/rvm)

rvm is then installed in .rvm/bin.

Then you can say:

.rvm/bin/rvm install 1.9.3

Note, you will want to add .rvm/bin to your .bashrc directory, so you will be able to
find rvm without giving the full path.
